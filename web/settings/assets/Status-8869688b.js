import{C as y}from"./index-e9f7f386.js";import{l as B,G as S,F as k,H as C,I as T,c as I,J as D,K as $,L as A,M as E,N as V}from"./vendor-fortawesome-8354fbc3.js";import{_ as W,p as n,k as r,y as l,L as u,A as t,u as c,x as g,q as x,z as f,Q as H,R as M,l as q,G as N,I as L}from"./vendor-e6c133db.js";import{C as Z,p as K,a as R,L as F,b as G,P as J,c as Q,T as U,i as X,d as Y,e as ee}from"./vendor-chartjs-6b3b5826.js";import"./vendor-bootstrap-040f8bb4.js";import"./vendor-jquery-d330dd82.js";import"./vendor-axios-5f915337.js";import"./vendor-sortablejs-ac752e17.js";import"./vendor-luxon-1af9332f.js";B.add(S);const te={name:"ChargePointSumCard",mixins:[y],components:{FontAwesomeIcon:k}};function ne(e,m,a,h,_,o){const i=n("font-awesome-icon"),d=n("openwb-base-text-input"),p=n("openwb-base-heading"),s=n("openwb-base-card");return r(),l(s,{subtype:"primary",collapsible:!0,collapsed:!0},{header:u(()=>[t(i,{"fixed-width":"",icon:["fas","charging-station"]}),c(" Alle Ladepunkte ")]),default:u(()=>[t(d,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/chargepoint/get/power",3,3,.001)},null,8,["model-value"]),t(d,{title:"Zählerstand laden",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/get/imported",3,3,.001)},null,8,["model-value"]),t(d,{title:"Zählerstand entladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/get/exported",3,3,.001)},null,8,["model-value"]),t(p,null,{default:u(()=>[c("Historie")]),_:1}),t(d,{title:"Heute geladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/get/daily_imported",3,3,.001)},null,8,["model-value"]),t(d,{title:"Heute entladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/get/daily_exported",3,3,.001)},null,8,["model-value"])]),_:1})}const ae=W(te,[["render",ne],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/ChargePointSumCard.vue"]]);B.add(C,T,I,S);const oe={name:"ChargePointCard",mixins:[y],components:{FontAwesomeIcon:k},props:{installedChargePointKey:String,installedChargePoint:Object},data(){return{statusLevel:["success","warning","danger"]}},computed:{chargePointIndex:{get(){return parseInt(this.installedChargePointKey.match(/(?:\/)(\d+)(?=\/)/)[1])}}}},re=x("br",null,null,-1),se=x("br",null,null,-1);function le(e,m,a,h,_,o){const i=n("font-awesome-icon"),d=n("openwb-base-alert"),p=n("openwb-base-checkbox-input"),s=n("openwb-base-text-input"),b=n("openwb-base-heading"),w=n("openwb-base-card");return r(),l(w,{subtype:"primary",collapsible:!0,collapsed:!0},{header:u(()=>[t(i,{"fixed-width":"",icon:["fas","charging-station"]}),c(" "+g(a.installedChargePoint.name)+" (ID: "+g(o.chargePointIndex)+") ",1)]),default:u(()=>[t(d,{subtype:_.statusLevel[e.$store.state.mqtt["openWB/chargepoint/"+o.chargePointIndex+"/get/fault_state"]]},{default:u(()=>[e.$store.state.mqtt["openWB/chargepoint/"+o.chargePointIndex+"/get/fault_state"]==1?(r(),l(i,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/chargepoint/"+o.chargePointIndex+"/get/fault_state"]==2?(r(),l(i,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(r(),l(i,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),c(" Modulmeldung:"),re,c(" "+g(e.$store.state.mqtt["openWB/chargepoint/"+o.chargePointIndex+"/get/fault_str"]),1)]),_:1},8,["subtype"]),t(d,{subtype:"info"},{default:u(()=>[c(" Statusmeldung:"),se,c(" "+g(e.$store.state.mqtt["openWB/chargepoint/"+o.chargePointIndex+"/get/state_str"]),1)]),_:1}),t(p,{title:"Fahrzeug angesteckt",disabled:"","model-value":e.$store.state.mqtt["openWB/chargepoint/"+o.chargePointIndex+"/get/plug_state"]==1},null,8,["model-value"]),t(p,{title:"Ladevorgang aktiv",disabled:"","model-value":e.$store.state.mqtt["openWB/chargepoint/"+o.chargePointIndex+"/get/charge_state"]==1},null,8,["model-value"]),t(s,{title:"Zählerstand laden",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/imported",3,3,.001)},null,8,["model-value"]),t(s,{title:"Zählerstand entladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/exported",3,3,.001)},null,8,["model-value"]),t(s,{title:"Heute geladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/daily_imported",3,3,.001)},null,8,["model-value"]),t(s,{title:"Heute entladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/daily_exported",3,3,.001)},null,8,["model-value"]),t(s,{title:"Wirkleistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/power",3,3,.001)},null,8,["model-value"]),t(s,{title:"Ladestromvorgabe",readonly:"",class:"text-right text-monospace",step:"0.01",unit:"A","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/set/current",2)},null,8,["model-value"]),t(s,{title:"Netzfrequenz",readonly:"",class:"text-right text-monospace",step:"0.01",unit:"Hz","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/frequency",2)},null,8,["model-value"]),t(b,null,{default:u(()=>[c("Werte pro Phase")]),_:1}),t(s,{title:"Spannung",readonly:"",class:"text-right text-monospace",unit:"V","model-value":e.formatPhaseArrayNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/voltages",1)},null,8,["model-value"]),t(s,{title:"Strom",readonly:"",class:"text-right text-monospace",unit:"A","model-value":e.formatPhaseArrayNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/currents",2)},null,8,["model-value"]),t(s,{title:"Wirkleistung",readonly:"",class:"text-right text-monospace",unit:"kW","model-value":e.formatPhaseArrayNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/powers",3,3,.001)},null,8,["model-value"]),t(s,{title:"Leistungsfaktor",readonly:"",class:"text-right text-monospace","model-value":e.formatPhaseArrayNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/power_factors",2)},null,8,["model-value"]),t(b,null,{default:u(()=>[c("Phasen")]),_:1}),t(s,{title:"Vorgabe",readonly:"",class:"text-right text-monospace","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/set/phases_to_use")},null,8,["model-value"]),t(s,{title:"Aktuell",readonly:"",class:"text-right text-monospace","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.chargePointIndex+"/get/phases_in_use")},null,8,["model-value"])]),_:1})}const ie=W(oe,[["render",le],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/ChargePointCard.vue"]]);B.add(C,T,I,D);const ce={name:"CounterCard",mixins:[y],components:{FontAwesomeIcon:k},props:{counter:Object},data(){return{statusLevel:["success","warning","danger"]}}},ue=x("br",null,null,-1),de=x("br",null,null,-1);function pe(e,m,a,h,_,o){const i=n("font-awesome-icon"),d=n("openwb-base-alert"),p=n("openwb-base-heading"),s=n("openwb-base-text-input"),b=n("openwb-base-card");return r(),l(b,{subtype:"danger",collapsible:!0,collapsed:!0},{header:u(()=>[t(i,{"fixed-width":"",icon:["fas","gauge-high"]}),c(" "+g(a.counter.name)+" (ID: "+g(a.counter.id)+") ",1)]),default:u(()=>[t(d,{subtype:_.statusLevel[e.$store.state.mqtt["openWB/counter/"+a.counter.id+"/get/fault_state"]]},{default:u(()=>[e.$store.state.mqtt["openWB/counter/"+a.counter.id+"/get/fault_state"]==1?(r(),l(i,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/counter/"+a.counter.id+"/get/fault_state"]==2?(r(),l(i,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(r(),l(i,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),c(" Modulmeldung:"),ue,c(" "+g(e.$store.state.mqtt["openWB/counter/"+a.counter.id+"/get/fault_str"]),1)]),_:1},8,["subtype"]),e.$store.state.mqtt["openWB/counter/"+a.counter.id+"/get/state_str"]!=null?(r(),l(d,{key:0,subtype:"info"},{default:u(()=>[c(" Statusmeldung:"),de,c(" "+g(e.$store.state.mqtt["openWB/counter/"+a.counter.id+"/get/state_str"]),1)]),_:1})):f("v-if",!0),t(p,null,{default:u(()=>[c("Zählerstände")]),_:1}),t(s,{title:"Export",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/counter/"+a.counter.id+"/get/exported",3,3,.001)},null,8,["model-value"]),t(s,{title:"Import",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/counter/"+a.counter.id+"/get/imported",3,3,.001)},null,8,["model-value"]),t(p,null,{default:u(()=>[c("Saldierte Werte")]),_:1}),t(s,{title:"Wirkleistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/counter/"+a.counter.id+"/get/power",3,3,.001)},null,8,["model-value"]),t(s,{title:"Netzfrequenz",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"Hz","model-value":e.formatNumberTopic("openWB/counter/"+a.counter.id+"/get/frequency",3)},null,8,["model-value"]),t(p,null,{default:u(()=>[c("Werte pro Phase")]),_:1}),t(s,{title:"Spannung",readonly:"",class:"text-right text-monospace",unit:"V","model-value":e.formatPhaseArrayNumberTopic("openWB/counter/"+a.counter.id+"/get/voltages",1)},null,8,["model-value"]),t(s,{title:"Strom",readonly:"",class:"text-right text-monospace",unit:"A","model-value":e.formatPhaseArrayNumberTopic("openWB/counter/"+a.counter.id+"/get/currents",2)},null,8,["model-value"]),t(s,{title:"Wirkleistung",readonly:"",class:"text-right text-monospace",unit:"kW","model-value":e.formatPhaseArrayNumberTopic("openWB/counter/"+a.counter.id+"/get/powers",3,3,.001)},null,8,["model-value"]),t(s,{title:"Leistungsfaktor",readonly:"",class:"text-right text-monospace","model-value":e.formatPhaseArrayNumberTopic("openWB/counter/"+a.counter.id+"/get/power_factors",2)},null,8,["model-value"])]),_:1})}const me=W(ce,[["render",pe],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/CounterCard.vue"]]);B.add(C,T,I,$);const ge={name:"InverterSumCard",mixins:[y],components:{FontAwesomeIcon:k}};function he(e,m,a,h,_,o){const i=n("font-awesome-icon"),d=n("openwb-base-text-input"),p=n("openwb-base-heading"),s=n("openwb-base-card");return r(),l(s,{subtype:"success",collapsible:!0,collapsed:!0},{header:u(()=>[t(i,{"fixed-width":"",icon:["fas","solar-panel"]}),c(" Alle Wechselrichter ")]),default:u(()=>[t(d,{title:"Zählerstand",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/get/exported",3,3,.001)},null,8,["model-value"]),t(d,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/pv/get/power",3,3,.001)},null,8,["model-value"]),t(p,null,{default:u(()=>[c("Erträge")]),_:1}),t(d,{title:"Heute",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/get/daily_exported",3,3,.001)},null,8,["model-value"]),t(d,{title:"Dieser Monat",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/get/monthly_exported",3,3,.001)},null,8,["model-value"]),t(d,{title:"Dieses Jahr",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/get/yearly_exported",3,3,.001)},null,8,["model-value"])]),_:1})}const _e=W(ge,[["render",he],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/InverterSumCard.vue"]]);B.add(C,T,I,$);const fe={name:"InverterCard",mixins:[y],components:{FontAwesomeIcon:k},props:{inverter:Object},data(){return{statusLevel:["success","warning","danger"]}}},be=x("br",null,null,-1);function ve(e,m,a,h,_,o){const i=n("font-awesome-icon"),d=n("openwb-base-alert"),p=n("openwb-base-text-input"),s=n("openwb-base-card");return r(),l(s,{subtype:"success",collapsible:!0,collapsed:!0},{header:u(()=>[t(i,{"fixed-width":"",icon:["fas","solar-panel"]}),c(" "+g(a.inverter.name)+" (ID: "+g(a.inverter.id)+") ",1)]),default:u(()=>[t(d,{subtype:_.statusLevel[e.$store.state.mqtt["openWB/pv/"+a.inverter.id+"/get/fault_state"]]},{default:u(()=>[e.$store.state.mqtt["openWB/pv/"+a.inverter.id+"/get/fault_state"]==1?(r(),l(i,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/pv/"+a.inverter.id+"/get/fault_state"]==2?(r(),l(i,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(r(),l(i,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),c(" Modulmeldung:"),be,c(" "+g(e.$store.state.mqtt["openWB/pv/"+a.inverter.id+"/get/fault_str"]),1)]),_:1},8,["subtype"]),t(p,{title:"Zählerstand",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/"+a.inverter.id+"/get/exported",3,3,.001)},null,8,["model-value"]),t(p,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/pv/"+a.inverter.id+"/get/power",3,3,.001)},null,8,["model-value"])]),_:1})}const ye=W(fe,[["render",ve],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/InverterCard.vue"]]);B.add(C,T,I,A);const We={name:"BatterySumCard",mixins:[y],components:{FontAwesomeIcon:k}},xe=x("br",null,null,-1);function we(e,m,a,h,_,o){const i=n("font-awesome-icon"),d=n("openwb-base-alert"),p=n("openwb-base-heading"),s=n("openwb-base-text-input"),b=n("openwb-base-number-input"),w=n("openwb-base-card");return r(),l(w,{subtype:"warning",collapsible:!0,collapsed:!0},{header:u(()=>[t(i,{"fixed-width":"",icon:["fas","car-battery"]}),c(" Alle Speicher ")]),default:u(()=>[t(d,{subtype:e.statusLevel[e.$store.state.mqtt["openWB/bat/get/fault_state"]]},{default:u(()=>[e.$store.state.mqtt["openWB/bat/get/fault_state"]==1?(r(),l(i,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/bat/get/fault_state"]==2?(r(),l(i,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(r(),l(i,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),c(" Modulmeldung:"),xe,c(" "+g(e.$store.state.mqtt["openWB/bat/get/fault_str"]),1)]),_:1},8,["subtype"]),t(p,null,{default:u(()=>[c("Zählerstände")]),_:1}),t(s,{title:"Ladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/get/imported",3,3,.001)},null,8,["model-value"]),t(s,{title:"Entladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/get/exported",3,3,.001)},null,8,["model-value"]),t(p,null,{default:u(()=>[c("Tageswerte")]),_:1}),t(s,{title:"Ladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/get/daily_imported",3,3,.001)},null,8,["model-value"]),t(s,{title:"Entladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/get/daily_exported",3,3,.001)},null,8,["model-value"]),t(p,null,{default:u(()=>[c("Saldierte Werte")]),_:1}),t(s,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/bat/get/power",3,3,.001)},null,8,["model-value"]),t(b,{title:"Ladestand",readonly:"",class:"text-right text-monospace",unit:"%","model-value":e.$store.state.mqtt["openWB/bat/get/soc"]},null,8,["model-value"])]),_:1})}const Be=W(We,[["render",we],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/BatterySumCard.vue"]]);B.add(C,T,I,A);const ke={name:"InverterCard",mixins:[y],components:{FontAwesomeIcon:k},props:{battery:Object},data(){return{statusLevel:["success","warning","danger"]}}},Ce=x("br",null,null,-1);function Te(e,m,a,h,_,o){const i=n("font-awesome-icon"),d=n("openwb-base-alert"),p=n("openwb-base-heading"),s=n("openwb-base-text-input"),b=n("openwb-base-number-input"),w=n("openwb-base-card");return r(),l(w,{subtype:"warning",collapsible:!0,collapsed:!0},{header:u(()=>[t(i,{"fixed-width":"",icon:["fas","car-battery"]}),c(" "+g(a.battery.name)+" (ID: "+g(a.battery.id)+") ",1)]),default:u(()=>[t(d,{subtype:_.statusLevel[e.$store.state.mqtt["openWB/bat/"+a.battery.id+"/get/fault_state"]]},{default:u(()=>[e.$store.state.mqtt["openWB/bat/"+a.battery.id+"/get/fault_state"]==1?(r(),l(i,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/bat/"+a.battery.id+"/get/fault_state"]==2?(r(),l(i,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(r(),l(i,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),c(" Modulmeldung:"),Ce,c(" "+g(e.$store.state.mqtt["openWB/bat/"+a.battery.id+"/get/fault_str"]),1)]),_:1},8,["subtype"]),t(p,null,{default:u(()=>[c("Aktuelle Werte")]),_:1}),t(s,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/bat/"+a.battery.id+"/get/power",3,3,.001)},null,8,["model-value"]),t(b,{title:"Ladestand",readonly:"",class:"text-right text-monospace",unit:"%","model-value":e.$store.state.mqtt["openWB/bat/"+a.battery.id+"/get/soc"]},null,8,["model-value"]),t(p,null,{default:u(()=>[c("Zählerstände")]),_:1}),t(s,{title:"Ladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/"+a.battery.id+"/get/imported",3,3,.001)},null,8,["model-value"]),t(s,{title:"Entladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/"+a.battery.id+"/get/exported",3,3,.001)},null,8,["model-value"])]),_:1})}const Ie=W(ke,[["render",Te],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/BatteryCard.vue"]]);B.add(C,T,I,E);const qe={name:"VehicleCard",mixins:[y],components:{FontAwesomeIcon:k},props:{vehicle:Object,vehicleKey:String,vehicleName:String},data(){return{statusLevel:["success","warning","danger"]}},computed:{vehicleIndex:{get(){return parseInt(this.vehicleKey.match(/(?:\/)(\d+)(?=\/)/)[1])}}}},Pe=x("br",null,null,-1);function Ne(e,m,a,h,_,o){const i=n("font-awesome-icon"),d=n("openwb-base-alert"),p=n("openwb-base-heading"),s=n("openwb-base-number-input"),b=n("openwb-base-text-input"),w=n("openwb-base-card");return r(),l(w,{subtype:"info",collapsible:!0,collapsed:!0},{header:u(()=>[t(i,{"fixed-width":"",icon:["fas","car"]}),c(" "+g(a.vehicleName)+" (ID: "+g(o.vehicleIndex)+") ",1)]),default:u(()=>[e.$store.state.mqtt["openWB/vehicle/"+o.vehicleIndex+"/get/fault_state"]!==void 0?(r(),l(d,{key:0,subtype:_.statusLevel[e.$store.state.mqtt["openWB/vehicle/"+o.vehicleIndex+"/get/fault_state"]]},{default:u(()=>[e.$store.state.mqtt["openWB/vehicle/"+o.vehicleIndex+"/get/fault_state"]==1?(r(),l(i,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/vehicle/"+o.vehicleIndex+"/get/fault_state"]==2?(r(),l(i,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(r(),l(i,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),c(" Modulmeldung:"),Pe,c(" "+g(e.$store.state.mqtt["openWB/vehicle/"+o.vehicleIndex+"/get/fault_str"]),1)]),_:1},8,["subtype"])):f("v-if",!0),t(p,null,{default:u(()=>[c("Fahrzeugdaten")]),_:1}),t(s,{title:"Ladestand",readonly:"",class:"text-right text-monospace",unit:"%","model-value":e.$store.state.mqtt["openWB/vehicle/"+o.vehicleIndex+"/get/soc"]},null,8,["model-value"]),t(s,{title:"Reichweite",readonly:"",class:"text-right text-monospace",unit:"km","model-value":Math.round(e.$store.state.mqtt["openWB/vehicle/"+o.vehicleIndex+"/get/range"])},null,8,["model-value"]),t(b,{title:"Letzter Zeitstempel",readonly:"",class:"text-right text-monospace","model-value":e.$store.state.mqtt["openWB/vehicle/"+o.vehicleIndex+"/get/soc_timestamp"]},null,8,["model-value"])]),_:1})}const Le=W(qe,[["render",Ne],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/VehicleCard.vue"]]);B.add(C,T,I,V);Z.register(K,R,F,G,J,Q,U,X,Y);const Se={name:"ElectricityTariffCard",mixins:[y],components:{ChartjsLine:ee,FontAwesomeIcon:k},data(){return{mqttTopicsToSubscribe:["openWB/optional/et/provider","openWB/optional/et/get/fault_state","openWB/optional/et/get/fault_str","openWB/optional/et/get/prices"],statusLevel:["success","warning","danger"],chartDatasets:{datasets:[{label:"Stromtarif",unit:"ct/kWh",type:"line",stepped:!0,borderColor:"rgba(255, 0, 0, 0.7)",backgroundColor:"rgba(255, 10, 13, 0.3)",fill:!1,pointStyle:"circle",pointRadius:0,pointHoverRadius:4,cubicInterpolationMode:"monotone",hidden:!1,borderWidth:1,data:void 0,yAxisID:"y",parsing:{xAxisKey:"timestamp",yAxisKey:"price"}}]},chartOptions:{plugins:{title:{display:!1},tooltip:{enabled:!0},legend:{display:!1}},elements:{point:{radius:2}},responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"hour",text:"Zeit",maxTicksLimit:24},display:!0,title:{display:!0,text:"Uhrzeit"},ticks:{font:{size:12},maxTicksLimit:0},grid:{}},y:{position:"left",type:"linear",display:"auto",title:{font:{size:12},display:!0,text:"Preis [ct/kWh]"},grid:{},ticks:{font:{size:12},stepSize:.01,maxTicksLimit:11}}}}}},computed:{electricityTariffConfigured(){const e=this.$store.state.mqtt["openWB/optional/et/provider"];return e!==void 0?(console.log(e.type),e.type!==null):!1},chartDataRead(){return this.chartDataObject.datasets[0].data!=null},chartDataObject(){if(this.$store.state.mqtt["openWB/optional/et/get/prices"]){var e=this.$store.state.mqtt["openWB/optional/et/get/prices"],m=[];for(const[_,o]of Object.entries(e))m.push({timestamp:_*1e3,price:o*1e5});const h=m.slice(-1)[0];m.push({timestamp:h.timestamp+(60*60-1)*1e3,price:h.price})}const a=this.chartDatasets;return a.datasets[0].data=m,a}}},$e=e=>(H("data-v-f4769d2f"),e=e(),M(),e),Ae=$e(()=>x("br",null,null,-1)),je={class:"openwb-chart"};function Oe(e,m,a,h,_,o){const i=n("font-awesome-icon"),d=n("openwb-base-alert"),p=n("openwb-base-text-input"),s=n("chartjs-line"),b=n("openwb-base-card");return o.electricityTariffConfigured?(r(),l(b,{key:0,subtype:"secondary",collapsible:!0,collapsed:!0},{header:u(()=>[t(i,{"fixed-width":"",icon:["fas","ranking-star"]}),c(" Variabler Stromtarif ")]),default:u(()=>[t(d,{subtype:_.statusLevel[e.$store.state.mqtt["openWB/optional/et/get/fault_state"]]},{default:u(()=>[e.$store.state.mqtt["openWB/optional/et/get/fault_state"]==1?(r(),l(i,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/optional/et/get/fault_state"]==2?(r(),l(i,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(r(),l(i,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),c(" Modulmeldung:"),Ae,c(" "+g(e.$store.state.mqtt["openWB/optional/et/get/fault_str"]),1)]),_:1},8,["subtype"]),t(p,{title:"Anbieter",readonly:"","model-value":e.$store.state.mqtt["openWB/optional/et/provider"].name},null,8,["model-value"]),x("div",je,[o.chartDataRead?(r(),l(s,{key:0,ref:"myChart",data:o.chartDataObject,options:_.chartOptions},null,8,["data","options"])):f("v-if",!0)])]),_:1})):f("v-if",!0)}const ze=W(Se,[["render",Oe],["__scopeId","data-v-f4769d2f"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/ElectricityTariffCard.vue"]]);const De={name:"OpenwbStatus",mixins:[y],components:{ChargePointSumCard:ae,ChargePointCard:ie,CounterCard:me,InverterSumCard:_e,InverterCard:ye,BatterySumCard:Be,BatteryCard:Ie,VehicleCard:Le,ElectricityTariffCard:ze},data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/chargepoint/get/power","openWB/chargepoint/get/imported","openWB/chargepoint/get/exported","openWB/chargepoint/get/daily_imported","openWB/chargepoint/get/daily_exported","openWB/chargepoint/+/config","openWB/chargepoint/+/get/+","openWB/chargepoint/+/get/connected_vehicle/info","openWB/chargepoint/+/set/+","openWB/system/device/+/component/+/config","openWB/counter/+/get/+","openWB/pv/get/+","openWB/pv/+/get/+","openWB/bat/get/+","openWB/bat/+/get/+","openWB/vehicle/+/name","openWB/vehicle/+/get/+"]}},computed:{installedChargePoints:{get(){let e=this.getWildcardTopics("openWB/chargepoint/+/config"),m={};for(const[a,h]of Object.entries(e))(h.type==="internal_openwb"||this.$store.state.mqtt["openWB/general/extern"]===!1)&&(m[a]=h);return m}},numChargePointsInstalled:{get(){return Object.keys(this.installedChargePoints).length}},counterConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"counter")}},numInvertersInstalled:{get(){return Object.keys(this.inverterConfigs).length}},inverterConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"inverter")}},numBatteriesInstalled:{get(){return Object.keys(this.batteryConfigs).length}},batteryConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"bat")}},vehicleNames:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.getWildcardTopics("openWB/vehicle/+/name")}}},methods:{filterComponentsByType(e,m){return Object.keys(e).filter(a=>e[a].type.includes(m)).reduce((a,h)=>({...a,[h]:e[h]}),{})}}},Ee={class:"status"};function Ve(e,m,a,h,_,o){const i=n("charge-point-sum-card"),d=n("charge-point-card"),p=n("counter-card"),s=n("inverter-sum-card"),b=n("inverter-card"),w=n("battery-sum-card"),j=n("battery-card"),O=n("vehicle-card"),z=n("electricity-tariff-card");return r(),q("div",Ee,[f(" all charge points "),o.numChargePointsInstalled>1&&e.$store.state.mqtt["openWB/general/extern"]===!1?(r(),l(i,{key:0})):f("v-if",!0),f(" individual charge points "),(r(!0),q(N,null,L(o.installedChargePoints,(v,P)=>(r(),l(d,{key:P,installedChargePoint:v,installedChargePointKey:P},null,8,["installedChargePoint","installedChargePointKey"]))),128)),f(" counters "),(r(!0),q(N,null,L(o.counterConfigs,v=>(r(),l(p,{key:v.id,counter:v},null,8,["counter"]))),128)),f(" all inverters "),o.numInvertersInstalled>1&&e.$store.state.mqtt["openWB/general/extern"]===!1?(r(),l(s,{key:1})):f("v-if",!0),f(" individual inverters "),(r(!0),q(N,null,L(o.inverterConfigs,v=>(r(),l(b,{key:v.id,inverter:v},null,8,["inverter"]))),128)),f(" all batteries "),o.numBatteriesInstalled>1&&e.$store.state.mqtt["openWB/general/extern"]===!1?(r(),l(w,{key:2})):f("v-if",!0),f(" individual batteries "),(r(!0),q(N,null,L(o.batteryConfigs,v=>(r(),l(j,{key:v.id,battery:v},null,8,["battery"]))),128)),f(" vehicles "),(r(!0),q(N,null,L(o.vehicleNames,(v,P)=>(r(),l(O,{key:P,vehicleKey:P,vehicleName:v},null,8,["vehicleKey","vehicleName"]))),128)),f(" electricity tariff "),t(z)])}const Ue=W(De,[["render",Ve],["__scopeId","data-v-051028a3"],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/Status.vue"]]);export{Ue as default};
